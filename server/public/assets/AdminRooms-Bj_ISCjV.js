import{y as k,j as e,L as w,a8 as S,l as A,M as E,D,r as t,o as F,q as $,s as L,X as M,V as I,Y as T,a9 as q}from"./index-JLmx17Az.js";const P=()=>{const i=k(),n=[{path:"/admin",icon:e.jsx(S,{}),label:"Dashboard"},{path:"/admin/rooms",icon:e.jsx(A,{}),label:"Rooms"},{path:"/admin/bookings",icon:e.jsx(E,{}),label:"Bookings"},{path:"/admin/messages",icon:e.jsx(D,{}),label:"Messages"}];return e.jsxs("div",{className:"admin-sidebar bg-dark text-white p-3",style:{minHeight:"100vh"},children:[e.jsx("h3",{className:"mb-4",children:"Admin Panel"}),e.jsx("ul",{className:"nav flex-column",children:n.map(a=>e.jsx("li",{className:"nav-item",children:e.jsxs(w,{to:a.path,className:`nav-link d-flex align-items-center gap-2 ${i.pathname===a.path?"active":""}`,children:[a.icon,a.label]})},a.path))})]})},U=({show:i,onHide:n,room:a,onSubmit:b})=>{const[c,h]=t.useState({name:"",type:"",price:"",capacity:"",description:"",available:!0});t.useEffect(()=>{a&&h(a)},[a]);const l=o=>{const{name:d,value:j,type:m,checked:p}=o.target;h(u=>({...u,[d]:m==="checkbox"?p:j}))},x=o=>{o.preventDefault(),b(c)};return i?e.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:a?"Edit Room":"Add New Room"}),e.jsx("button",{type:"button",className:"btn-close",onClick:n})]}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Room Name"}),e.jsx("input",{type:"text",className:"form-control",name:"name",value:c.name,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Room Type"}),e.jsx("input",{type:"text",className:"form-control",name:"type",value:c.type,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Price per Night"}),e.jsx("input",{type:"number",className:"form-control",name:"price",value:c.price,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Capacity"}),e.jsx("input",{type:"number",className:"form-control",name:"capacity",value:c.capacity,onChange:l,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Description"}),e.jsx("textarea",{className:"form-control",name:"description",value:c.description,onChange:l,rows:"3"})]}),e.jsxs("div",{className:"mb-3 form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",name:"available",checked:c.available,onChange:l}),e.jsx("label",{className:"form-check-label",children:"Available"})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:n,children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a?"Update":"Add"," Room"]})]})]})]})})}):null},H=()=>{const i=F(),{rooms:n,loading:a,error:b,success:c}=$(s=>s.rooms),[h,l]=t.useState(!1),[x,o]=t.useState(null),[d,j]=t.useState(""),[m,p]=t.useState(""),[u,f]=t.useState([]),N="http://localhost:3000";t.useEffect(()=>{i(L())},[i]),t.useEffect(()=>{let s=n;d&&(s=s.filter(r=>r.name.toLowerCase().includes(d.toLowerCase())||r.description.toLowerCase().includes(d.toLowerCase()))),m&&(s=s.filter(r=>r.type===m)),f(s)},[n,d,m]);const v=()=>{o(null),l(!0)},g=s=>{o(s),l(!0)},y=s=>{window.confirm("Are you sure you want to delete this room?")&&i(q(s))},R=()=>{l(!1),o(null)};[...new Set(n.map(s=>s.type))];const C=s=>s?s.startsWith("http")?s:s.startsWith("/uploads/")?`${N}${s}`:`${N}/uploads/${s}`:"/default-room.jpg";return e.jsxs("div",{className:"d-flex",children:[e.jsx(P,{}),e.jsxs("div",{className:"flex-grow-1 p-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h2",{children:"Manage Rooms"}),e.jsxs("button",{className:"btn btn-primary",onClick:v,children:[e.jsx(M,{className:"me-2"}),"Add New Room"]})]}),e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Room Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:u.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.id}),e.jsx("td",{children:s.name}),e.jsxs("td",{children:["$",s.price]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${s.available?"bg-success":"bg-danger"}`,children:s.available?"Available":"Unavailable"})}),e.jsx("td",{children:s.image?e.jsx("img",{src:C(s.image),alt:`Room ${s.roomNumber}`,className:"room-thumbnail",onError:r=>{r.target.onerror=null,r.target.src="/default-room.jpg"}}):e.jsx("div",{className:"no-image",children:"No Image"})}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>g(s),title:"Edit Room",children:e.jsx(I,{})}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>y(s.id),title:"Delete Room",children:e.jsx(T,{})})]})]},s.id))})]})})})})]}),e.jsx(U,{show:h,onHide:R,room:x})]})};export{H as default};
