import{o as v,q as N,r as l,aa as g,j as s,ab as b,D as C,ac as S}from"./index-cLXZ2XQB.js";const L=()=>{const r=v(),{messages:i,loading:u}=N(e=>e.messages),[w,x]=l.useState(null),[t,h]=l.useState(""),[c,j]=l.useState(""),[d,f]=l.useState([]);l.useEffect(()=>{r(g())},[r]),l.useEffect(()=>{let e=i;t&&(e=e.filter(a=>{var n,o,m;return((n=a.name)==null?void 0:n.toLowerCase().includes(t.toLowerCase()))||((o=a.email)==null?void 0:o.toLowerCase().includes(t.toLowerCase()))||((m=a.subject)==null?void 0:m.toLowerCase().includes(t.toLowerCase()))})),c==="read"?e=e.filter(a=>a.read):c==="unread"&&(e=e.filter(a=>!a.read)),f(e)},[i,t,c]);const p=e=>{x(e),e.read||r(S(e.id))};return s.jsxs("div",{className:"container py-4",children:[s.jsx("h2",{className:"mb-4",children:"Messages"}),s.jsxs("div",{className:"mb-3 d-flex gap-2",children:[s.jsx("input",{type:"text",placeholder:"Search by name, email, subject",className:"form-control",value:t,onChange:e=>h(e.target.value)}),s.jsxs("select",{className:"form-select",value:c,onChange:e=>j(e.target.value),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"read",children:"Read"}),s.jsx("option",{value:"unread",children:"Unread"})]})]}),s.jsx("div",{className:"card",children:s.jsx("div",{className:"card-body",children:u?s.jsx("p",{children:"Loading messages..."}):d.length===0?s.jsx("p",{children:"No messages found."}):s.jsx("div",{className:"list-group",children:d.map(e=>s.jsxs("div",{onClick:()=>p(e),className:`list-group-item list-group-item-action ${e.read?"":"fw-bold"}`,children:[s.jsxs("div",{className:"d-flex w-100 justify-content-between align-items-center",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[e.read?s.jsx(b,{className:"text-muted me-3"}):s.jsx(C,{className:"text-primary me-3"}),s.jsxs("div",{children:[s.jsx("h6",{className:"mb-1",children:e.subject}),s.jsxs("small",{className:"text-muted",children:["From: ",e.name," (",e.email,")"]})]})]}),s.jsx("small",{className:"text-muted",children:e.date})]}),s.jsx("p",{className:"mb-1 mt-2",children:e.message})]},e.id))})})})]})};export{L as default};
