import{o as F,p as B,y as I,q as P,r as c,s as V,j as e,i as y,k as N,l as v,A as E}from"./index-JLmx17Az.js";import{m as i}from"./proxy-dBKeKQzG.js";const U=()=>{const x=F(),p=B(),r=I(),{rooms:t,loading:d,error:o}=P(s=>s.rooms),[a,m]=c.useState(null),[b,n]=c.useState(!1),j="http://localhost:3000";c.useEffect(()=>{x(V())},[x]),c.useEffect(()=>{if(r.state&&r.state.selectedRoomId&&t.length>0){const s=t.find(l=>l._id===r.state.selectedRoomId);console.log(s),s&&(m(s),n(!0))}},[r.state,t]);const g=s=>{m(s),n(!0)},h=()=>{n(!1),m(null),p(r.pathname,{replace:!0})},f=()=>{a&&(p("/booking",{state:{selectedRoom:a,roomId:a._id,roomType:a.type,roomPrice:a.price,roomNumber:a.roomNumber,roomName:a.roomName}}),n(!1))},R={WiFi:"Free WiFi",TV:"Smart TV",AC:"Air Conditioning","Mini Bar":"Mini Bar",Pool:"Swimming Pool",Parking:"Free Parking",Gym:"Fitness Center",Shower:"Private Bathroom","Room Service":"Room Service",Accessible:"Accessible"},k={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.5,staggerChildren:.1}}},A={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.5,ease:[.25,.1,.25,1]}}},C={hidden:{opacity:0,y:-30},visible:{opacity:1,y:0,transition:{duration:.7,ease:"easeOut"}}},w={hidden:{opacity:0,scale:.9},visible:{opacity:1,scale:1,transition:{duration:.3,ease:"easeOut"}},exit:{opacity:0,scale:.9,transition:{duration:.2,ease:"easeIn"}}},S={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.3}}},u=s=>s?s.startsWith("http")?s:s.startsWith("/uploads/")?`${j}${s}`:`${j}/uploads/${s}`:"/default-room.jpg";return e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("section",{className:"page-hero",style:{backgroundImage:"url(https://images.pexels.com/photos/338504/pexels-photo-338504.jpeg)"},children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row h-100 align-items-center justify-content-center text-center",children:e.jsxs("div",{className:"col-lg-10",children:[e.jsx(i.h1,{className:"display-3 text-white mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:"Our Rooms"}),e.jsx(i.nav,{"aria-label":"breadcrumb",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:e.jsxs("ol",{className:"breadcrumb justify-content-center",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx("a",{href:"/",className:"text-white",children:"Home"})}),e.jsx("li",{className:"breadcrumb-item active text-secondary","aria-current":"page",children:"Rooms"})]})})]})})})}),e.jsxs("div",{className:"rooms-container",children:[e.jsxs(i.div,{className:"rooms-header",variants:C,initial:"hidden",animate:"visible",children:[e.jsx("h1",{children:"Our Accommodations"}),e.jsx("p",{children:"Explore our selection of meticulously designed rooms, each offering a unique blend of comfort and luxury."})]}),d&&e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),o&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),!d&&!o&&Array.isArray(t)&&t.length>0&&e.jsx(i.div,{className:"rooms-grid",variants:k,initial:"hidden",animate:"visible",children:t.map(s=>e.jsxs(i.div,{className:"room-card",variants:A,onClick:()=>g(s),layoutId:`room-card-${s._id}`,children:[e.jsx(i.img,{src:u(s.image),className:"bg-image",alt:s.type||"Room",onError:l=>{l.target.onerror=null,l.target.src="/default-room.jpg"}}),e.jsx("div",{className:"overlay"}),e.jsxs("div",{className:"room-price",children:["$",s.price||0," / night"]}),e.jsxs("div",{className:"room-info",children:[e.jsx("h3",{children:s.roomName||s.type||"Unnamed Room"}),e.jsx("p",{className:"description",children:s.description||"No description available."}),e.jsxs("div",{className:"room-details",children:[e.jsxs("div",{className:"room-detail",children:[e.jsx(y,{}),e.jsxs("span",{children:[s.size||0," m²"]})]}),e.jsxs("div",{className:"room-detail",children:[e.jsx(N,{}),e.jsxs("span",{children:[s.capacity||0," Guests"]})]}),e.jsxs("div",{className:"room-detail",children:[e.jsx(v,{}),e.jsxs("span",{children:[s.beds||1," Bed(s)"]})]})]})]})]},s._id||s.id))}),!d&&!o&&(!Array.isArray(t)||t.length===0)&&e.jsx("div",{className:"text-center py-5",children:e.jsx("p",{children:"No rooms available at the moment."})}),e.jsx(E,{children:b&&a&&e.jsx(i.div,{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.6)"},variants:S,initial:"hidden",animate:"visible",exit:"exit",onClick:h,children:e.jsx(i.div,{className:"modal-dialog modal-lg",variants:w,onClick:s=>s.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:a.roomName||a.type||"Unnamed Room"}),e.jsx(i.button,{type:"button",className:"btn-close",onClick:h,whileHover:{scale:1.1},whileTap:{scale:.9}})]}),e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6",children:e.jsx("img",{src:u(a.image),alt:a.type,className:"img-fluid rounded",onError:s=>{s.target.onerror=null,s.target.src="/default-room.jpg"}})}),e.jsxs("div",{className:"col-lg-6",children:[e.jsx("h3",{children:a.roomName||a.type||"Unnamed Room"}),e.jsxs("p",{className:"lead",children:["$",a.price||0," per night"]}),e.jsx("p",{children:a.description||"No description available."}),e.jsxs("div",{className:"d-flex justify-content-around my-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(y,{className:"h4 text-primary"}),e.jsxs("p",{children:[a.size||0," m²"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(N,{className:"h4 text-primary"}),e.jsxs("p",{children:[a.capacity||0," Guests"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"h4 text-primary"}),e.jsxs("p",{children:[a.beds||1," Bed(s)"]})]})]}),e.jsx("h5",{children:"Amenities"}),e.jsx("ul",{children:Array.isArray(a.amenities)&&a.amenities.map(s=>e.jsx("li",{children:R[s]||s},s))})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:h,children:"Close"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:f,children:"Book This Room"})]})]})})})})]})]})};export{U as default};
